Index: e-smith-proxy/e-smith-proxy.spec
diff -u e-smith-proxy/root/etc/e-smith/templates/etc/httpd/conf/proxy/proxy.pac/90proxyDefault:1.3 e-smith-proxy/root/etc/e-smith/templates/etc/httpd/conf/proxy/proxy.pac/90proxyDefault:1.4
--- e-smith-proxy/root/etc/e-smith/templates/etc/httpd/conf/proxy/proxy.pac/90proxyDefault:1.3	Sat Nov  5 16:46:05 2005
+++ e-smith-proxy/root/etc/e-smith/templates/etc/httpd/conf/proxy/proxy.pac/90proxyDefault	Wed Nov 23 21:43:44 2005
@@ -1,9 +1,9 @@
 {    
-    return "DIRECT" unless ($squid{status} eq "enabled");
-
+    my $enabled = $squid{status} || 'disabled';
     my $port = $squid{TransparentPort} || 3128;
+    my $target = ($enabled eq 'enabled') ?
+	"PROXY proxy.$DomainName:$port" :
+	"DIRECT";
 
-    $OUT = <<HERE;
-	return "PROXY proxy.$DomainName:$port";
-HERE
+    $OUT = '	return "' . $target . '";';
 }
